<header class="topbar">
  <div class="d-flex align-items-center gap-2">
    {% if user.is_authenticated %}
    <button class="btn btn-ghost btn-sm d-lg-none" type="button" id="sidebarToggle" aria-label="Toggle navigation">
      <i class="bi bi-list"></i>
    </button>
    {% endif %}
    <a class="brand d-flex align-items-center gap-2" href="{% url 'accounts:landing' %}">
      <span class="fw-bold text-dark">LibraFlow</span>
      <span class="badge-soft">LMS</span>
    </a>
  </div>
  <div class="nav-actions">
    <a class="btn btn-ghost btn-sm d-none d-md-inline-flex" href="{% url 'books:list' %}"><i class="bi bi-collection me-1"></i>Browse</a>
    {% if user.is_authenticated and user.profile.role == 'STUDENT' %}
      <a class="btn btn-ghost btn-sm d-none d-md-inline-flex" href="{% url 'transactions:my-issues' %}">My Issues</a>
    {% endif %}
    {% if user.is_authenticated %}
      <div class="dropdown">
        <button class="btn user-pill dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
          <span class="avatar">{{ user.first_name|default:user.username|slice:':1'|upper }}</span>
          <div class="d-flex flex-column align-items-start">
            <span class="small">{{ user.first_name|default:user.username }}</span>
            <span class="badge-soft text-uppercase">{{ user.profile.role }}</span>
          </div>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="{% url 'accounts:dashboard' %}"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'accounts:logout' %}">Logout</a></li>
        </ul>
      </div>
    {% else %}
      <a class="btn btn-ghost btn-sm" href="{% url 'accounts:login' %}">Login</a>
      <a class="btn btn-gradient btn-sm" href="{% url 'accounts:register' %}">Register</a>
    {% endif %}
  </div>
</header>
