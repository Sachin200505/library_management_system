import{c as v,r,R as y,j as e,h as p}from"./index-B0U1T1C1.js";import{B as b}from"./book.service-CAcsJwBd.js";import{l as k,C as B,a as S}from"./lodash-BI20lBqQ.js";import{B as f}from"./book-open-CIpCioG8.js";import{S as C}from"./search-DnLxAvwA.js";import{P as E}from"./plus-l3sj6by8.js";import{C as P}from"./check-circle-BtgdL02B.js";import{A}from"./alert-octagon-OAG5jzE2.js";import{T as L}from"./trash-2-CKwnef7w.js";const M=v("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),z=()=>{const[d,x]=r.useState([]),[g,h]=r.useState(!0),[o,j]=r.useState(""),[n,c]=r.useState(1),[l,m]=r.useState({next:null,previous:null,count:0}),u=async(s,a)=>{h(!0);try{const t=await b.getAll({search:s,page:a});t.results?(x(t.results),m({next:t.next,previous:t.previous,count:t.count})):(x(t),m({next:null,previous:null,count:t.length}))}catch(t){console.error("Error fetching books",t)}finally{h(!1)}},i=y.useCallback(k.debounce((s,a)=>{u(s,a)},500),[]);r.useEffect(()=>(i(o,n),()=>i.cancel()),[o,n,i]);const w=async s=>{if(window.confirm("Are you sure you want to delete this book?"))try{await b.delete(s),u(o,n)}catch(a){console.error("Error deleting book",a),alert("Failed to delete book.")}},N=s=>{j(s.target.value),c(1)};return g&&!d.length?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-white/50 p-6 rounded-2xl glass-card shadow-lg backdrop-blur-md border border-white/20 gap-4 sticky top-0 z-10 w-full mb-6 text-slate-800",children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3 font-heading",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(f,{className:"text-blue-600 w-8 h-8"})}),"Manage Books"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search books...",value:o,onChange:N,className:"w-full md:w-64 pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-slate-800 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm"})]}),e.jsxs(p,{to:"/admin/books/new",className:"flex items-center justify-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-500/30 transform hover:-translate-y-0.5 transition-all",children:[e.jsx(E,{className:"w-5 h-5"}),"Add Book"]})]})]}),e.jsx("div",{className:"glass-card bg-white rounded-2xl overflow-hidden shadow-xl border border-slate-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Book Details"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"ISBN"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Inventory"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[d.map(s=>{var a,t;return e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:s.title}),e.jsxs("div",{className:"text-sm text-slate-500",children:["by ",(a=s.author)==null?void 0:a.name]})]})}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-slate-600",children:s.isbn}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold border border-slate-200",children:(t=s.category)==null?void 0:t.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold border ${s.available_count>0?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[s.available_count>0?e.jsx(P,{className:"w-3 h-3"}):e.jsx(A,{className:"w-3 h-3"}),s.available_count," / ",s.quantity]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(p,{to:`/admin/books/edit/${s.id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border border-transparent hover:border-blue-100",title:"Edit Book",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-transparent hover:border-red-100",title:"Delete Book",children:e.jsx(L,{className:"w-4 h-4"})})]})})]},s.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(f,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"font-medium",children:"No books found."})]})})})]})]})})}),(l.next||l.previous)&&e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsx("button",{onClick:()=>c(s=>Math.max(1,s-1)),disabled:!l.previous,className:`p-2.5 rounded-lg border transition-all ${l.previous?"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:border-slate-300 shadow-sm":"bg-slate-50 text-slate-300 border-slate-100 cursor-not-allowed"}`,children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm font-medium text-slate-600 bg-white px-4 py-2 rounded-lg border border-slate-200 shadow-sm",children:["Page ",n]}),e.jsx("button",{onClick:()=>c(s=>s+1),disabled:!l.next,className:`p-2.5 rounded-lg border transition-all ${l.next?"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:border-slate-300 shadow-sm":"bg-slate-50 text-slate-300 border-slate-100 cursor-not-allowed"}`,children:e.jsx(S,{className:"w-5 h-5"})})]})]})};export{z as default};
