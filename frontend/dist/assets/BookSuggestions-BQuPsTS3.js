import{c as u,r,d as n,j as e,L as o,X as g}from"./index-B0U1T1C1.js";import{C as p}from"./check-Ce-VbAi1.js";const b=u("BookPlus",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M9 10h6",key:"9gxzsh"}],["path",{d:"M12 7v6",key:"lw1j43"}]]),N=()=>{const[l,c]=r.useState([]),[i,x]=r.useState(!0);r.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await n.get("suggestions/");c(s.data.results||s.data)}catch(s){console.error("Error fetching suggestions",s)}finally{x(!1)}},a=async(s,t)=>{try{await n.patch(`suggestions/${s}/`,{status:t}),d()}catch(h){console.error("Error updating suggestion",h),alert("Failed to update status.")}};return i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("div",{className:"flex justify-between items-center bg-white/50 p-6 rounded-2xl glass-card shadow-lg backdrop-blur-md border border-white/20 sticky top-0 z-10 w-full text-slate-800",children:e.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3 font-heading",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(o,{className:"text-yellow-600 w-8 h-8"})}),"Book Suggestions"]})}),e.jsx("div",{className:"glass-card bg-white rounded-2xl overflow-hidden shadow-xl border border-slate-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Title / Author"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Suggested By"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-slate-800",children:s.title}),e.jsx("div",{className:"text-sm text-slate-500",children:s.author})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:s.category}),e.jsx("td",{className:"px-6 py-4 max-w-xs truncate text-slate-600",title:s.reason,children:s.reason}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:((t=s.created_by)==null?void 0:t.username)||"Unknown"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full border shadow-sm
                                            ${s.status==="PENDING"?"bg-amber-100 text-amber-700 border-amber-200":s.status==="APPROVED"?"bg-green-100 text-green-700 border-green-200":s.status==="ADDED"?"bg-blue-100 text-blue-700 border-blue-200":"bg-red-100 text-red-700 border-red-200"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(s.id,"APPROVED"),className:"p-2 bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors border border-green-200",title:"Approve",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(s.id,"REJECTED"),className:"p-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors border border-red-200",title:"Reject",children:e.jsx(g,{className:"w-4 h-4"})})]}),s.status==="APPROVED"&&e.jsx("button",{onClick:()=>a(s.id,"ADDED"),className:"p-2 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200",title:"Mark as Added to Library",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},s.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(o,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"font-medium",children:"No suggestions found."})]})})})]})]})})})]})};export{N as default};
