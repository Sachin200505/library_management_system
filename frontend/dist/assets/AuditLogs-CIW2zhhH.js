import{c as u,r as t,d as f,j as e,S as g,F as b,C as j}from"./index-B0U1T1C1.js";import{D as N}from"./download-CgcWTV3z.js";import{S as w}from"./search-DnLxAvwA.js";const y=u("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),C=()=>{const[a,c]=t.useState(""),[o,v]=t.useState("ALL"),[i,x]=t.useState([]),[m,n]=t.useState(!0);t.useEffect(()=>{h()},[o,a]);const h=async()=>{n(!0);try{const s=await f.get("/analytics/audit_logs/");let l=s.data.results||s.data;if(a){const r=a.toLowerCase();l=l.filter(d=>d.action.toLowerCase().includes(r)||d.username.toLowerCase().includes(r)||d.details.toLowerCase().includes(r))}x(l)}catch(s){console.error("Error fetching audit logs",s)}finally{n(!1)}},p=s=>s.includes("LOGIN")||s.includes("REGISTER")||s.includes("SUCCESS")?"bg-emerald-100 text-emerald-700 border-emerald-200":s.includes("DELETE")||s.includes("FAILED")?"bg-red-100 text-red-700 border-red-200":s.includes("UPDATE")||s.includes("CHANGE")?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-700 border-slate-200";return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:e.jsx(g,{className:"w-8 h-8 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-slate-500",children:"Track all system activities and security events."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 font-medium transition-colors",children:[e.jsx(y,{className:"w-4 h-4"})," Filter"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold transition-colors shadow-sm",children:[e.jsx(N,{className:"w-4 h-4"})," Export CSV"]})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search logs by user, action, or details...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition-all",value:a,onChange:s=>c(s.target.value)})]})}),e.jsx("div",{className:"card overflow-hidden border border-slate-200 shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[e.jsx("th",{className:"p-4 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"p-4 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"p-4 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Details"}),e.jsx("th",{className:"p-4 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"p-4 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Time"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${p(s.action)}`,children:[e.jsx(b,{className:"w-3 h-3"}),s.action]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:s.username.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:s.username})]})}),e.jsx("td",{className:"p-4",children:e.jsx("p",{className:"text-sm text-slate-600",children:s.details})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500",children:s.ip_address||"N/A"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 text-slate-400 text-sm",children:[e.jsx(j,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()})]})})]},s.id)),i.length===0&&!m&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-500",children:"No logs found."})})]})]})})})]})};export{C as default};
