import{r as a,j as e,C as n,U as h,k as p,X as u}from"./index-B0U1T1C1.js";import{E as r}from"./extension.service-Kj7yH7fP.js";import{B as j}from"./book-open-CIpCioG8.js";import{C as b}from"./check-Ce-VbAi1.js";const w=()=>{const[l,i]=a.useState([]),[x,o]=a.useState(!0);a.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await r.getAll();i(s.results||s)}catch(s){console.error("Error fetching requests",s)}finally{o(!1)}},c=async(s,t)=>{try{t==="approve"?await r.approve(s):await r.reject(s),d()}catch(m){console.error(`Error ${t}ing request`,m),alert(`Failed to ${t} request`)}};return x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("div",{className:"flex justify-between items-center bg-white/50 p-6 rounded-2xl glass-card shadow-lg backdrop-blur-md border border-white/20 sticky top-0 z-10 w-full",children:e.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3 font-heading",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(n,{className:"text-blue-600 w-8 h-8"})}),"Extension Requests"]})}),e.jsx("div",{className:"glass-card bg-white rounded-2xl overflow-hidden shadow-xl border border-slate-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Book Details"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center",children:e.jsx(h,{className:"w-4 h-4 text-slate-500"})}),e.jsx("span",{className:"font-semibold text-slate-700",children:s.user_username})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-slate-700",children:[e.jsx(j,{className:"w-4 h-4 text-slate-400"}),s.issue_book_title||"-"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(p,{className:"w-3 h-3"}),"Requested: ",s.days_requested," days"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-600 max-w-xs truncate",title:s.reason,children:s.reason})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${s.status==="APPROVED"?"bg-green-100 text-green-700 border-green-200":s.status==="REJECTED"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-700 border-amber-200"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.status==="PENDING"&&e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>c(s.id,"approve"),className:"p-2 bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors border border-green-200",title:"Approve",children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(s.id,"reject"),className:"p-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors border border-red-200",title:"Reject",children:e.jsx(u,{className:"w-4 h-4"})})]})})]},s.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(n,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"font-medium",children:"No extension requests found."})]})})})]})]})})})]})};export{w as default};
