import{r as a,j as e,k as m,C as c,h}from"./index-B0U1T1C1.js";import{R as n}from"./reservation.service-BfQRBp_R.js";import{B as p}from"./book-open-CIpCioG8.js";import{C as u}from"./check-circle-BtgdL02B.js";import{X as b}from"./x-circle-DBcbp7z3.js";const y=()=>{const[r,i]=a.useState([]),[d,o]=a.useState(!0);a.useEffect(()=>{l()},[]);const l=async()=>{try{const s=await n.getAll();i(s.results||s)}catch(s){console.error("Error fetching reservations",s)}finally{o(!1)}},x=async s=>{if(window.confirm("Are you sure you want to cancel this reservation?"))try{await n.cancel(s),l()}catch(t){console.error("Error canceling reservation",t),alert("Failed to cancel reservation.")}};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("div",{className:"flex justify-between items-center bg-white/50 p-6 rounded-2xl glass-card shadow-lg backdrop-blur-md border border-white/20 sticky top-0 z-10 w-full mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3 font-heading",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(m,{className:"text-purple-600 w-8 h-8"})}),"My Reservations"]})}),e.jsx("div",{className:"glass-card bg-white rounded-2xl overflow-hidden shadow-xl border border-slate-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Book Details"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Reserved Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[r.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-500",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold text-slate-700",children:((t=s.book)==null?void 0:t.title)||"Unknown Title"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 text-sm",children:[e.jsx(c,{className:"w-4 h-4 text-slate-400"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm inline-flex items-center gap-1
                                            ${s.status==="ACTIVE"?"bg-green-100 text-green-700 border-green-200":s.status==="COMPLETED"?"bg-blue-100 text-blue-700 border-blue-200":"bg-red-100 text-red-700 border-red-200"}`,children:[s.status==="ACTIVE"&&e.jsx(u,{className:"w-3 h-3"}),s.status]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.status==="ACTIVE"&&e.jsxs("button",{onClick:()=>x(s.id),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg text-sm font-semibold transition-colors border border-red-100",children:[e.jsx(b,{className:"w-4 h-4"})," Cancel"]})})]},s.id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(c,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"font-medium text-slate-700",children:"No active reservations."}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1 max-w-xs text-center",children:["Reservations are for out-of-stock books. ",e.jsx("br",{}),"If you requested an available book, check ",e.jsx(h,{to:"/issues",className:"text-primary-600 hover:underline",children:"Issues & Returns"}),"."]})]})})})]})]})})})]})};export{y as default};
