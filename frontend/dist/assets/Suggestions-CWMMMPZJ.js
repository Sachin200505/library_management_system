import{d as i,r as l,j as e,L as x}from"./index-B0U1T1C1.js";import{P as p}from"./plus-l3sj6by8.js";const g={getAll:async()=>(await i.get("suggestions/")).data,create:async s=>(await i.post("suggestions/",s)).data,update:async(s,o)=>(await i.put(`suggestions/${s}/`,o)).data,delete:async s=>{await i.delete(`suggestions/${s}/`)}},j=()=>{const[s,o]=l.useState([]),[c,h]=l.useState(!0),[u,d]=l.useState(!1),[a,r]=l.useState({title:"",author:"",category:"",reason:""});l.useEffect(()=>{m()},[]);const m=async()=>{try{const t=await g.getAll();o(t.results||t)}catch(t){console.error("Error fetching suggestions",t)}finally{h(!1)}},b=async t=>{t.preventDefault();try{await g.create(a),d(!1),r({title:"",author:"",category:"",reason:""}),m()}catch(n){console.error("Error creating suggestion",n),alert("Failed to submit suggestion.")}};return c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6 pb-10 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-xl border border-slate-200 shadow-sm sticky top-20 md:top-0 z-30",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2 tracking-tight",children:[e.jsx(x,{className:"text-yellow-500 w-6 h-6"}),"Book Suggestions"]}),e.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 px-4 py-2 bg-yellow-50 text-yellow-700 hover:bg-yellow-100 border border-yellow-200 rounded-lg transition-colors font-medium text-sm",children:[e.jsx(p,{className:"w-4 h-4"}),"Suggest Book"]})]}),u&&e.jsxs("div",{className:"card p-6 mb-6 animate-slide-up bg-slate-50/50",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"New Suggestion"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Book Title",value:a.title,onChange:t=>r({...a,title:t.target.value}),className:"input-field",required:!0}),e.jsx("input",{type:"text",placeholder:"Category (e.g., Sci-Fi, Fiction)",value:a.category,onChange:t=>r({...a,category:t.target.value}),className:"input-field",required:!0})]}),e.jsx("input",{type:"text",placeholder:"Author",value:a.author,onChange:t=>r({...a,author:t.target.value}),className:"input-field",required:!0}),e.jsx("textarea",{placeholder:"Why should we add this book?",value:a.reason,onChange:t=>r({...a,reason:t.target.value}),className:"input-field min-h-[100px] resize-y",rows:"3"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-lg shadow-sm shadow-yellow-500/20 transition-all active:scale-95",children:"Submit Request"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(t=>{var n;return e.jsxs("div",{className:"card p-5 hover:shadow-md transition-all duration-200 group border-l-4 border-l-yellow-400",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate pr-2",children:t.title}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold border uppercase tracking-wide
                                ${t.status==="APPROVED"?"bg-emerald-50 text-emerald-700 border-emerald-100":t.status==="REJECTED"?"bg-red-50 text-red-700 border-red-100":"bg-blue-50 text-blue-700 border-blue-100"}`,children:t.status})]}),e.jsxs("p",{className:"text-sm text-slate-600 mb-3 font-medium",children:["by ",t.author]}),e.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100 mb-3",children:e.jsxs("p",{className:"text-slate-600 italic text-sm",children:['"',t.reason,'"']})}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-400 mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-medium text-slate-500",children:["Suggested by: ",((n=t.created_by)==null?void 0:n.username)||"Anonymous"]}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]})]},t.id)})}),s.length===0&&e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-dashed border-slate-200",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-yellow-100",children:e.jsx(x,{className:"w-8 h-8 text-yellow-400"})}),e.jsx("h3",{className:"text-slate-900 font-bold text-lg mb-1",children:"No suggestions yet"}),e.jsx("p",{className:"text-slate-500",children:"Be the first to suggest a book for our collection!"})]})]})};export{j as default};
