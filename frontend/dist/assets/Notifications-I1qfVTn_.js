import{c as h,d as l,r as o,j as s,l as c,C as p}from"./index-B0U1T1C1.js";import{C as b}from"./check-Ce-VbAi1.js";const f=h("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),n={getAll:async()=>(await l.get("notifications/")).data,markAsRead:async a=>(await l.post(`notifications/${a}/mark_read/`)).data,markAllAsRead:async()=>(await l.post("notifications/mark_all_read/")).data,getUnreadCount:async()=>(await l.get("notifications/unread_count/")).data},N=()=>{const[a,r]=o.useState([]),[i,d]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const e=await n.getAll();r(e.results||e)}catch(e){console.error("Error fetching notifications",e)}finally{d(!1)}},x=async e=>{try{await n.markAsRead(e),r(a.map(t=>t.id===e?{...t,is_read:!0}:t))}catch(t){console.error("Error marking as read",t)}},u=async()=>{try{await n.markAllAsRead(),r(a.map(e=>({...e,is_read:!0})))}catch(e){console.error("Error marking all as read",e)}};return i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto pb-10 animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-xl border border-slate-200 shadow-sm sticky top-20 md:top-0 z-30",children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2 tracking-tight",children:[s.jsx(c,{className:"text-blue-600 w-6 h-6"}),"Notifications"]}),a.some(e=>!e.is_read)&&s.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors font-medium text-sm",children:[s.jsx(b,{className:"w-4 h-4"}),"Mark All Read"]})]}),s.jsxs("div",{className:"space-y-3",children:[a.map(e=>s.jsxs("div",{className:`card p-5 transition-all hover:shadow-md flex items-start justify-between group border-l-4 ${e.is_read?"border-l-slate-200 bg-slate-50/50":"border-l-blue-500 bg-white"}`,children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-base ${e.is_read?"text-slate-500":"text-slate-900 font-semibold"}`,children:e.message}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1.5 flex items-center gap-1",children:[s.jsx(p,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleString()]})]}),!e.is_read&&s.jsx("button",{onClick:()=>x(e.id),className:"ml-4 p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Mark as read",children:s.jsx(f,{className:"w-4 h-4"})})]},e.id)),a.length===0&&s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-dashed border-slate-200",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-slate-100",children:s.jsx(c,{className:"w-8 h-8 text-slate-300"})}),s.jsx("h3",{className:"text-slate-900 font-bold text-lg mb-1",children:"No notifications"}),s.jsx("p",{className:"text-slate-500",children:"You're all caught up!"})]})]})]})};export{N as default};
